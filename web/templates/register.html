{{template "base" .}}

{{define "content"}}
<div class="auth-container">
    <div class="auth-card card">
        <div class="auth-header">
            <h1>üéµ Inscription</h1>
            <p>Rejoignez Groupie-Tracker pour jouer avec vos amis !</p>
        </div>
        
        {{if .Error}}
        <div class="alert alert-danger">
            {{.Error}}
        </div>
        {{end}}
        
        <form method="POST" action="/register" class="auth-form" id="register-form">
            <div class="form-group">
                <label for="pseudo">Pseudo</label>
                <input type="text" 
                       id="pseudo" 
                       name="pseudo" 
                       placeholder="VotrePseudo (avec majuscule)"
                       pattern=".*[A-Z].*"
                       minlength="3"
                       maxlength="30"
                       required
                       autocomplete="username">
                <small class="form-hint">Doit contenir au moins une majuscule (3-30 caract√®res)</small>
            </div>
            
            <div class="form-group">
                <label for="email">Email</label>
                <input type="email" 
                       id="email" 
                       name="email" 
                       placeholder="votre@email.com"
                       required
                       autocomplete="email">
            </div>
            
            <div class="form-group">
                <label for="password">Mot de passe</label>
                <input type="password" 
                       id="password" 
                       name="password" 
                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                       minlength="12"
                       required
                       autocomplete="new-password">
                <small class="form-hint">Minimum 12 caract√®res : majuscule, minuscule, chiffre, caract√®re sp√©cial</small>
            </div>
            
            <div class="form-group">
                <label for="confirm_password">Confirmer le mot de passe</label>
                <input type="password" 
                       id="confirm_password" 
                       name="confirm_password" 
                       placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                       minlength="12"
                       required
                       autocomplete="new-password">
            </div>
            
            <div class="password-strength" id="password-strength">
                <div class="strength-bar"><span></span></div>
                <small class="strength-text"></small>
            </div>
            
            <button type="submit" class="btn btn-primary btn-lg btn-block">
                S'inscrire
            </button>
        </form>
        
        <div class="auth-footer">
            <p>D√©j√† inscrit ? <a href="/login">Se connecter</a></p>
        </div>
    </div>
</div>
{{end}}

{{define "scripts"}}
<script>
document.addEventListener('DOMContentLoaded', function() {
    const password = document.getElementById('password');
    const confirm = document.getElementById('confirm_password');
    const form = document.getElementById('register-form');
    const strengthBar = document.querySelector('.strength-bar span');
    const strengthText = document.querySelector('.strength-text');
    
    // V√©rification force du mot de passe
    password.addEventListener('input', function() {
        const value = this.value;
        let strength = 0;
        let tips = [];
        
        if (value.length >= 12) strength += 25;
        else tips.push('12+ caract√®res');
        
        if (/[A-Z]/.test(value)) strength += 25;
        else tips.push('majuscule');
        
        if (/[a-z]/.test(value)) strength += 25;
        else tips.push('minuscule');
        
        if (/[0-9]/.test(value)) strength += 12.5;
        else tips.push('chiffre');
        
        if (/[!@#$%^&*()_+\-=\[\]{}|;':",.\/<>?]/.test(value)) strength += 12.5;
        else tips.push('caract√®re sp√©cial');
        
        strengthBar.style.width = strength + '%';
        
        if (strength < 50) {
            strengthBar.style.background = 'var(--danger)';
            strengthText.textContent = 'Faible - Manque: ' + tips.join(', ');
        } else if (strength < 75) {
            strengthBar.style.background = 'var(--warning)';
            strengthText.textContent = 'Moyen - Manque: ' + tips.join(', ');
        } else if (strength < 100) {
            strengthBar.style.background = 'var(--info)';
            strengthText.textContent = 'Bon - Manque: ' + tips.join(', ');
        } else {
            strengthBar.style.background = 'var(--success)';
            strengthText.textContent = 'Excellent !';
        }
    });
    
    // V√©rification correspondance
    form.addEventListener('submit', function(e) {
        if (password.value !== confirm.value) {
            e.preventDefault();
            alert('Les mots de passe ne correspondent pas');
            confirm.focus();
        }
    });
});
</script>
<style>
.auth-container {
    max-width: 450px;
    margin: 2rem auto;
}

.auth-card {
    padding: 2.5rem;
}

.auth-header {
    text-align: center;
    margin-bottom: 2rem;
}

.auth-header h1 {
    font-size: 2rem;
    margin-bottom: 0.5rem;
}

.auth-header p {
    color: var(--gray-light);
}

.auth-form .form-group {
    margin-bottom: 1.25rem;
}

.form-hint {
    display: block;
    margin-top: 0.25rem;
    color: var(--gray);
    font-size: 0.8rem;
}

.btn-block {
    width: 100%;
    margin-top: 1.5rem;
}

.auth-footer {
    text-align: center;
    margin-top: 1.5rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--dark);
}

.auth-footer a {
    color: var(--primary);
    text-decoration: none;
}

.auth-footer a:hover {
    text-decoration: underline;
}

.password-strength {
    margin-top: -0.5rem;
    margin-bottom: 1rem;
}

.strength-bar {
    height: 4px;
    background: var(--dark);
    border-radius: 2px;
    overflow: hidden;
    margin-bottom: 0.25rem;
}

.strength-bar span {
    display: block;
    height: 100%;
    width: 0;
    transition: all 0.3s;
}

.strength-text {
    color: var(--gray);
    font-size: 0.75rem;
}
</style>
{{end}}